# ç‰ˆæœ¬ç®¡ç†è¯´æ˜æ–‡æ¡£

## æ¦‚è¿°

æœ¬é¡¹ç›®é‡‡ç”¨è‡ªåŠ¨åŒ–çš„ç‰ˆæœ¬ç®¡ç†ç³»ç»Ÿï¼Œç¡®ä¿ `package.json` å’Œ `manifest.json` ä¸­çš„ç‰ˆæœ¬å·å§‹ç»ˆä¿æŒåŒæ­¥ã€‚

## ç‰ˆæœ¬å·è§„åˆ™

é¡¹ç›®ä½¿ç”¨**è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶ï¼ˆSemantic Versioningï¼‰**ï¼š
- æ ¼å¼ï¼š`ä¸»ç‰ˆæœ¬å·.æ¬¡ç‰ˆæœ¬å·.ä¿®è®¢å·` (ä¾‹å¦‚ï¼š5.0.0)
- ç¤ºä¾‹ï¼š`5.0.0` â†’ `5.0.1` (patch) â†’ `5.1.0` (minor) â†’ `6.0.0` (major)

## å¿«é€Ÿå¼€å§‹

### 1. æŸ¥çœ‹å½“å‰ç‰ˆæœ¬

```bash
npm run version:show
```

### 2. æ£€æŸ¥ç‰ˆæœ¬åŒæ­¥çŠ¶æ€

```bash
npm run version:check
```

### 3. åŒæ­¥ç‰ˆæœ¬å·

```bash
# æ‰‹åŠ¨è®¾ç½®ç‰ˆæœ¬å·
npm run version:sync 5.0.1

# è‡ªåŠ¨è‡ªå¢ç‰ˆæœ¬
npm run version:bump:patch   # 5.0.0 â†’ 5.0.1
npm run version:bump:minor   # 5.0.1 â†’ 5.1.0
npm run version:bump:major   # 5.1.0 â†’ 6.0.0
```

## å¯ç”¨å‘½ä»¤

### ç‰ˆæœ¬æ˜¾ç¤º

```bash
npm run version:show
```
æ˜¾ç¤ºå½“å‰ç‰ˆæœ¬å·ã€‚

### ç‰ˆæœ¬åŒæ­¥

```bash
npm run version:sync <ç‰ˆæœ¬å·>
```
æ‰‹åŠ¨åŒæ­¥ç‰ˆæœ¬å·åˆ°æŒ‡å®šç‰ˆæœ¬ã€‚

**ç¤ºä¾‹ï¼š**
```bash
npm run version:sync 5.1.0
```

### ç‰ˆæœ¬è‡ªå¢

#### è¡¥ä¸ç‰ˆæœ¬ï¼ˆPatchï¼‰
```bash
npm run version:bump:patch
```
ä¿®å¤bugæ—¶ä½¿ç”¨ï¼Œå¢åŠ ä¿®è®¢å·ã€‚

**ç‰ˆæœ¬å˜åŒ–ç¤ºä¾‹ï¼š** `5.0.0` â†’ `5.0.1`

#### æ¬¡ç‰ˆæœ¬ï¼ˆMinorï¼‰
```bash
npm run version:bump:minor
```
æ–°åŠŸèƒ½æ·»åŠ æ—¶ä½¿ç”¨ï¼Œå¢åŠ æ¬¡ç‰ˆæœ¬å·ï¼Œé‡ç½®ä¿®è®¢å·ã€‚

**ç‰ˆæœ¬å˜åŒ–ç¤ºä¾‹ï¼š** `5.0.1` â†’ `5.1.0`

#### ä¸»ç‰ˆæœ¬ï¼ˆMajorï¼‰
```bash
npm run version:bump:major
```
é‡å¤§å˜æ›´æ—¶ä½¿ç”¨ï¼Œå¢åŠ ä¸»ç‰ˆæœ¬å·ï¼Œé‡ç½®æ¬¡ç‰ˆæœ¬å·å’Œä¿®è®¢å·ã€‚

**ç‰ˆæœ¬å˜åŒ–ç¤ºä¾‹ï¼š** `5.1.0` â†’ `6.0.0`

### ç‰ˆæœ¬æ£€æŸ¥

```bash
npm run version:check
```
æ£€æŸ¥ `package.json` å’Œ `manifest.json` ä¸­çš„ç‰ˆæœ¬æ˜¯å¦åŒæ­¥ã€‚

**é€€å‡ºä»£ç ï¼š**
- `0`: ç‰ˆæœ¬å·²åŒæ­¥
- `1`: ç‰ˆæœ¬ä¸åŒæ­¥

### å®Œæ•´å‘å¸ƒæµç¨‹

```bash
# è¡¥ä¸ç‰ˆæœ¬å‘å¸ƒ
npm run release

# æ¬¡ç‰ˆæœ¬å‘å¸ƒ
npm run release:minor

# ä¸»ç‰ˆæœ¬å‘å¸ƒ
npm run release:major
```

**å‘å¸ƒæµç¨‹åŒ…æ‹¬ï¼š**
1. æ£€æŸ¥ç‰ˆæœ¬åŒæ­¥
2. è¿è¡Œæ„å»º
3. è‡ªåŠ¨å¢åŠ ç‰ˆæœ¬å·

### äº¤äº’å¼å‘å¸ƒ

```bash
./scripts/release.sh
```

**åŠŸèƒ½ï¼š**
- äº¤äº’å¼é€‰æ‹©å‘å¸ƒç±»å‹
- è‡ªåŠ¨æ„å»ºé¡¹ç›®
- æäº¤æ›´æ”¹å¹¶åˆ›å»ºGitæ ‡ç­¾
- å¯é€‰æ‹©æ¨é€åˆ°è¿œç¨‹ä»“åº“

**ç¤ºä¾‹è¾“å‡ºï¼š**
```
â„¹ï¸  å½“å‰ç‰ˆæœ¬: 5.0.0

è¯·é€‰æ‹©å‘å¸ƒç±»å‹:
1) patch (è¡¥ä¸ç‰ˆæœ¬, 5.0.0 -> 5.0.1)
2) minor (æ¬¡ç‰ˆæœ¬, 5.0.0 -> 5.1.0)
3) major (ä¸»ç‰ˆæœ¬, 5.0.0 -> 6.0.0)
4) è‡ªå®šä¹‰ç‰ˆæœ¬å·
5) å–æ¶ˆ

è¯·è¾“å…¥é€‰æ‹© [1-5]: 2

â„¹ï¸  æ‰§è¡Œç‰ˆæœ¬è‡ªå¢: minor
âœ… å·²æ›´æ–° package.json -> 5.1.0
âœ… å·²æ›´æ–° manifest.json -> 5.1.0

â„¹ï¸  æ–°ç‰ˆæœ¬: 5.1.0
âœ… è¿è¡Œæ„å»º...
âœ… æ„å»ºæˆåŠŸ

â„¹ï¸  æäº¤ç‰ˆæœ¬æ›´æ”¹...
â„¹ï¸  åˆ›å»ºæ ‡ç­¾: v5.1.0

ğŸ‰ å‘å¸ƒå®Œæˆ!
```

## Git é›†æˆ

### è‡ªåŠ¨æ£€æŸ¥ï¼ˆPre-commit Hookï¼‰

é¡¹ç›®å·²é…ç½® Git pre-commit hookï¼Œæ¯æ¬¡æäº¤å‰è‡ªåŠ¨æ£€æŸ¥ç‰ˆæœ¬åŒæ­¥ã€‚

**æ£€æŸ¥å†…å®¹ï¼š**
- ç¡®ä¿ `package.json` å’Œ `manifest.json` ç‰ˆæœ¬å·ä¸€è‡´
- å¦‚æœä¸åŒæ­¥ï¼Œé˜»æ­¢æäº¤

**è§£å†³æ–¹æ¡ˆï¼š**
å¦‚æœæäº¤è¢«é˜»æ­¢ï¼Œè¿è¡Œï¼š
```bash
npm run version:sync <æ­£ç¡®çš„ç‰ˆæœ¬å·>
```

### Git æ ‡ç­¾

å‘å¸ƒæ–°ç‰ˆæœ¬æ—¶è‡ªåŠ¨åˆ›å»º Git æ ‡ç­¾ã€‚

**ç¤ºä¾‹æ ‡ç­¾ï¼š**
- `v5.0.0`
- `v5.1.0`
- `v6.0.0`

**æŸ¥çœ‹æ ‡ç­¾ï¼š**
```bash
git tag -l
```

**æ¨é€æ ‡ç­¾ï¼š**
```bash
git push origin <æ ‡ç­¾å>
# æˆ–æ¨é€æ‰€æœ‰æ ‡ç­¾
git push origin --tags
```

## å·¥ä½œæµç¨‹

### å¼€å‘æµç¨‹

1. **å¼€å‘æ–°åŠŸèƒ½**
   ```bash
   git checkout -b feature/new-feature
   ```

2. **å¼€å‘å®Œæˆåè‡ªå¢ç‰ˆæœ¬**
   ```bash
   npm run version:bump:minor  # æ·»åŠ æ–°åŠŸèƒ½
   ```

3. **æäº¤æ›´æ”¹**
   ```bash
   git add .
   git commit -m "feat: add new feature"
   git push origin feature/new-feature
   ```

4. **åˆ›å»º Pull Request**

5. **åˆå¹¶åˆ°ä¸»åˆ†æ”¯**

6. **å‘å¸ƒæ–°ç‰ˆæœ¬**
   ```bash
   ./scripts/release.sh
   ```

### ç´§æ€¥ä¿®å¤æµç¨‹

1. **åˆ›å»ºä¿®å¤åˆ†æ”¯**
   ```bash
   git checkout -b hotfix/critical-bug
   ```

2. **ä¿®å¤bug**

3. **æäº¤ä¿®å¤**
   ```bash
   git commit -m "fix: resolve critical bug"
   ```

4. **è‡ªå¢è¡¥ä¸ç‰ˆæœ¬**
   ```bash
   npm run version:bump:patch
   ```

5. **å‘å¸ƒä¿®å¤**
   ```bash
   ./scripts/release.sh
   ```

## è‡ªåŠ¨åŒ–ç‰¹æ€§

### 1. ç‰ˆæœ¬åŒæ­¥

ç‰ˆæœ¬ç®¡ç†å™¨è‡ªåŠ¨ï¼š
- è¯»å– `package.json` ä¸­çš„ç‰ˆæœ¬å·
- æ›´æ–° `manifest.json` ä¸­çš„ç‰ˆæœ¬å·
- ç¡®ä¿ä¸¤ä¸ªæ–‡ä»¶å§‹ç»ˆåŒæ­¥

### 2. Pre-commit Hook

- æ¯æ¬¡æäº¤å‰è‡ªåŠ¨æ£€æŸ¥
- é˜»æ­¢ç‰ˆæœ¬ä¸åŒæ­¥çš„æäº¤
- ç¡®ä¿ä»£ç åº“æ•´æ´

### 3. å‘å¸ƒè„šæœ¬

äº¤äº’å¼å‘å¸ƒè„šæœ¬æä¾›ï¼š
- é€‰æ‹©å‘å¸ƒç±»å‹ï¼ˆpatch/minor/major/è‡ªå®šä¹‰ï¼‰
- è‡ªåŠ¨æ„å»ºé¡¹ç›®
- åˆ›å»ºå¹¶æ¨é€ Git æ ‡ç­¾
- æ¸…æ™°çš„è¿›åº¦æç¤º

## æœ€ä½³å®è·µ

### 1. ç‰ˆæœ¬å·é€‰æ‹©

- **Patch**: ä¿®å¤bugã€å°æ”¹è¿›
- **Minor**: æ–°åŠŸèƒ½ã€å‘åå…¼å®¹çš„æ›´æ”¹
- **Major**: ç ´åæ€§æ›´æ”¹ã€é‡å¤§é‡æ„

### 2. æäº¤ä¿¡æ¯æ ¼å¼

ä½¿ç”¨çº¦å®šå¼æäº¤æ ¼å¼ï¼š

```
<type>[optional scope]: <description>

[optional body]

[optional footer(s)]
```

**ç¤ºä¾‹ï¼š**
```bash
feat: add auto-grading feature
fix: resolve score calculation bug
docs: update installation guide
refactor: simplify core logic
```

### 3. å‘å¸ƒèŠ‚å¥

- **é¢‘ç¹å‘å¸ƒå°ç‰ˆæœ¬**ï¼šé¿å…å¤§å¹…ç‰ˆæœ¬è·³è·ƒ
- **åŠæ—¶å‘å¸ƒä¿®å¤**ï¼šbugä¿®å¤åŠæ—¶å‘å¸ƒ
- **è®°å½•å˜æ›´æ—¥å¿—**ï¼šæ¯æ¬¡å‘å¸ƒè®°å½•é‡è¦æ›´æ”¹

### 4. æµ‹è¯•

å‘å¸ƒå‰ç¡®ä¿ï¼š
```bash
npm test          # è¿è¡Œæµ‹è¯•
npm run lint      # ä»£ç æ£€æŸ¥
npm run build     # æ„å»ºæˆåŠŸ
```

## æ•…éšœæ’é™¤

### 1. ç‰ˆæœ¬ä¸åŒæ­¥é”™è¯¯

**é”™è¯¯ä¿¡æ¯ï¼š** `âŒ ç‰ˆæœ¬ä¸åŒæ­¥`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
npm run version:sync <æ­£ç¡®çš„ç‰ˆæœ¬å·>
```

### 2. æ„å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š** `âŒ æ„å»ºå¤±è´¥`

**è§£å†³æ–¹æ¡ˆï¼š**
1. æ£€æŸ¥ä»£ç é”™è¯¯
2. è¿è¡Œæµ‹è¯•ï¼š`npm test`
3. ä¿®å¤æ‰€æœ‰é—®é¢˜
4. é‡æ–°è¿è¡Œå‘å¸ƒ

### 3. pre-commit hook å¤±è´¥

**é”™è¯¯ä¿¡æ¯ï¼š** `âŒ ç‰ˆæœ¬åŒæ­¥æ£€æŸ¥å¤±è´¥ï¼`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
npm run version:sync <å½“å‰ç‰ˆæœ¬å·>
git add .
git commit -m "chore: sync version numbers"
```

### 4. æƒé™é”™è¯¯

**é”™è¯¯ä¿¡æ¯ï¼š** `Permission denied`

**è§£å†³æ–¹æ¡ˆï¼š**
```bash
chmod +x scripts/version-manager.js
chmod +x scripts/release.sh
```

## ç¤ºä¾‹

### ç¤ºä¾‹ 1ï¼šå‘å¸ƒå°ç‰ˆæœ¬

```bash
# å½“å‰ç‰ˆæœ¬ 5.0.0
# æ·»åŠ äº†æ–°çš„UIç»„ä»¶

# è‡ªå¢æ¬¡ç‰ˆæœ¬
npm run version:bump:minor
# ç‰ˆæœ¬å˜ä¸º 5.1.0

# æäº¤å¹¶æ¨é€
git add .
git commit -m "feat: add new UI component"
git push origin main

# åˆ›å»ºæ ‡ç­¾
git tag v5.1.0
git push origin v5.1.0
```

### ç¤ºä¾‹ 2ï¼šç´§æ€¥ä¿®å¤

```bash
# å½“å‰ç‰ˆæœ¬ 5.1.0
# å‘ç°è¯„åˆ†è®¡ç®—bug

# å¿«é€Ÿä¿®å¤
git checkout -b hotfix/score-calculation
# ... ä¿®å¤ä»£ç  ...

# è‡ªå¢è¡¥ä¸ç‰ˆæœ¬
npm run version:bump:patch
# ç‰ˆæœ¬å˜ä¸º 5.1.1

# å¿«é€Ÿå‘å¸ƒ
./scripts/release.sh
# é€‰æ‹© 1 (patch)
```

### ç¤ºä¾‹ 3ï¼šå¤§ç‰ˆæœ¬å‘å¸ƒ

```bash
# å½“å‰ç‰ˆæœ¬ 5.x.x
# é‡æ„äº†æ ¸å¿ƒæ¶æ„

# è‡ªå¢ä¸»ç‰ˆæœ¬
npm run version:bump:major
# ç‰ˆæœ¬å˜ä¸º 6.0.0

# æäº¤
git add .
git commit -m "refactor: major architecture overhaul"
git push origin main

# å‘å¸ƒ
./scripts/release.sh
# é€‰æ‹© 3 (major)
```

## å‚è€ƒèµ„æº

- [è¯­ä¹‰åŒ–ç‰ˆæœ¬æ§åˆ¶è§„èŒƒ](https://semver.org/lang/zh-CN/)
- [çº¦å®šå¼æäº¤](https://www.conventionalcommits.org/zh-cn/v1.0.0/)
- [Git æ ‡ç­¾æ–‡æ¡£](https://git-scm.com/book/zh/v2/Git-åŸºç¡€-æ‰“æ ‡ç­¾)

## æ”¯æŒ

å¦‚æœ‰ç–‘é—®ï¼Œè¯·ï¼š
1. æŸ¥çœ‹æœ¬æ–‡æ¡£
2. è¿è¡Œ `npm run version:show` æ£€æŸ¥ç‰ˆæœ¬
3. è¿è¡Œ `npm run version:check` æ£€æŸ¥åŒæ­¥çŠ¶æ€
4. æäº¤ Issue

---

**ç‰ˆæœ¬ç®¡ç†å™¨ç‰ˆæœ¬ï¼š** 1.0.0
**æœ€åæ›´æ–°ï¼š** 2025-11-15